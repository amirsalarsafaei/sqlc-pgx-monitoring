{"title":"SQLC-PGX Monitoring Dashboard","uid":"sqlc-pgx-monitoring","editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"liveNow":false,"timezone":"","id":null,"style":"dark","schemaVersion":38,"templating":{"list":[]},"timepicker":{},"weekStart":"","version":0,"panels":[{"datasource":{"uid":"prometheus","type":"prometheus"},"id":1,"fieldConfig":{"overrides":[],"defaults":{"mappings":[],"unit":"ms","color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"vis":false,"legend":false,"tooltip":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"mode":"none","group":"A"},"thresholdsStyle":{"mode":"off"}},"thresholds":{"steps":[{"value":null,"color":"green"},{"value":80,"color":"red"}],"mode":"absolute"}}},"gridPos":{"x":0,"y":0,"h":8,"w":12},"options":{"tooltip":{"sort":"none","mode":"single"},"legend":{"displayMode":"list","placement":"bottom","showLegend":true,"calcs":[]}},"title":"Database Operation Duration Percentiles","targets":[{"datasource":{"uid":"prometheus","type":"prometheus"},"intervalFactor":1,"legendFormat":"{{db_operation}} (95th percentile)","refId":"A","expr":"histogram_quantile(0.95, sum(rate(db_client_operation_duration_bucket[5m])) by (le, db_operation))","format":"time_series"},{"datasource":{"uid":"prometheus","type":"prometheus"},"intervalFactor":1,"legendFormat":"{{db_operation}} (50th percentile)","refId":"B","expr":"histogram_quantile(0.50, sum(rate(db_client_operation_duration_bucket[5m])) by (le, db_operation))","format":"time_series"}],"type":"timeseries"},{"datasource":{"uid":"prometheus","type":"prometheus"},"id":2,"fieldConfig":{"overrides":[],"defaults":{"mappings":[],"unit":"reqps","color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"vis":false,"legend":false,"tooltip":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"mode":"none","group":"A"},"thresholdsStyle":{"mode":"off"}},"thresholds":{"steps":[{"value":null,"color":"green"},{"value":80,"color":"red"}],"mode":"absolute"}}},"gridPos":{"x":12,"y":0,"h":8,"w":12},"options":{"tooltip":{"sort":"none","mode":"single"},"legend":{"displayMode":"list","placement":"bottom","showLegend":true,"calcs":[]}},"title":"Database Operations Rate","targets":[{"datasource":{"uid":"prometheus","type":"prometheus"},"intervalFactor":1,"legendFormat":"{{db_operation}}","refId":"A","expr":"sum(rate(db_client_operation_duration_count[5m])) by (db_operation)","format":"time_series"}],"type":"timeseries"},{"datasource":{"uid":"prometheus","type":"prometheus"},"gridPos":{"x":0,"y":8,"h":8,"w":8},"options":{"showThresholdLabels":false,"orientation":"auto","reduceOptions":{"values":false,"fields":"","calcs":["lastNotNull"]},"showThresholdMarkers":true},"id":3,"fieldConfig":{"overrides":[],"defaults":{"mappings":[],"color":{"mode":"thresholds"},"thresholds":{"steps":[{"value":null,"color":"green"},{"value":80,"color":"red"}],"mode":"absolute"}}},"title":"Active Database Connections","pluginVersion":"10.0.0","targets":[{"datasource":{"uid":"prometheus","type":"prometheus"},"intervalFactor":1,"legendFormat":"Active Connections","refId":"A","expr":"sum(db_client_connections_active)","format":"time_series"}],"type":"gauge"},{"datasource":{"uid":"prometheus","type":"prometheus"},"id":4,"fieldConfig":{"overrides":[],"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"vis":false,"legend":false,"tooltip":false}},"mappings":[]}},"gridPos":{"x":8,"y":8,"h":8,"w":8},"options":{"pieType":"pie","tooltip":{"sort":"none","mode":"single"},"reduceOptions":{"values":false,"fields":"","calcs":["lastNotNull"]},"legend":{"displayMode":"visible","placement":"bottom","showLegend":true}},"title":"Query Distribution (Last Hour)","targets":[{"datasource":{"uid":"prometheus","type":"prometheus"},"intervalFactor":1,"legendFormat":"{{db_operation}}","refId":"A","expr":"sum by (db_operation) (increase(db_client_operation_duration_count[1h]))","format":"time_series"}],"type":"piechart"},{"datasource":{"uid":"prometheus","type":"prometheus"},"gridPos":{"x":16,"y":8,"h":8,"w":8},"options":{"showThresholdLabels":false,"orientation":"auto","reduceOptions":{"values":false,"fields":"","calcs":["lastNotNull"]},"showThresholdMarkers":true},"id":5,"fieldConfig":{"overrides":[],"defaults":{"unit":"percent","mappings":[],"color":{"mode":"thresholds"},"thresholds":{"steps":[{"value":null,"color":"green"},{"value":10,"color":"yellow"},{"value":50,"color":"red"}],"mode":"absolute"}}},"title":"Database Error Rate","pluginVersion":"10.0.0","targets":[{"datasource":{"uid":"prometheus","type":"prometheus"},"intervalFactor":1,"legendFormat":"Error Rate","refId":"A","expr":"(sum(rate(db_client_operation_duration_count{db_sql_status!="OK"}[5m])) / sum(rate(db_client_operation_duration_count[5m]))) * 100","format":"time_series"}],"type":"gauge"},{"datasource":{"uid":"prometheus","type":"prometheus"},"id":6,"fieldConfig":{"overrides":[],"defaults":{"mappings":[],"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"vis":false,"legend":false,"tooltip":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"mode":"none","group":"A"},"thresholdsStyle":{"mode":"off"}},"thresholds":{"steps":[{"value":null,"color":"green"},{"value":80,"color":"red"}],"mode":"absolute"}}},"gridPos":{"x":0,"y":16,"h":8,"w":24},"options":{"tooltip":{"sort":"none","mode":"single"},"legend":{"displayMode":"list","placement":"bottom","showLegend":true,"calcs":[]}},"title":"Connection Pool Status","targets":[{"datasource":{"uid":"prometheus","type":"prometheus"},"intervalFactor":1,"legendFormat":"Active - {{db_connection_pool_name}}","refId":"A","expr":"sum by (db_connection_pool_name) (db_client_connections_active)","format":"time_series"},{"datasource":{"uid":"prometheus","type":"prometheus"},"intervalFactor":1,"legendFormat":"Idle - {{db_connection_pool_name}}","refId":"B","expr":"sum by (db_connection_pool_name) (db_client_connections_idle)","format":"time_series"},{"datasource":{"uid":"prometheus","type":"prometheus"},"intervalFactor":1,"legendFormat":"Max - {{db_connection_pool_name}}","refId":"C","expr":"sum by (db_connection_pool_name) (db_client_connections_max)","format":"time_series"}],"type":"timeseries"}],"links":[],"refresh":"5s","tags":["database","postgresql","monitoring","sqlc","pgx"],"annotations":{"list":[{"datasource":{"uid":"grafana","type":"datasource"},"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard","hide":true,"enable":true,"builtIn":1}]},"time":{"to":"now","from":"now-1h"}}

